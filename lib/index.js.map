{"version":3,"file":"index.js","sources":["../src/directives/table-infinite-scroll.js","../src/index.js"],"sourcesContent":["/**\n * 对 element-ui 的无限滚动在 el-table 上使用的封装\n */\nimport elInfiniteScroll from 'element-ui/lib/infinite-scroll';\n\nconst elInserted = elInfiniteScroll.inserted;\nconst elUnbind = elInfiniteScroll.unbind;\nconst elScope = 'ElInfiniteScroll';\n\nexport default {\n  inserted(el, binding, ...params) {\n    // 获取 table 中的滚动层\n    const scrollElem = el.querySelector('.el-table__body-wrapper');\n\n    // 如果没找到元素，返回错误\n    if (!scrollElem) {\n      throw 'table-infinite-scroll: 找不到 .el-table__body-wrapper 容器';\n    }\n\n    // 设置自动滚动\n    scrollElem.style.overflowY = 'auto';\n\n    // dom 渲染后\n    setTimeout(() => {\n      if (!scrollElem.style.height) {\n        scrollElem.style.height = '400px';\n        console.warn(\n          '[el-table-infinite-scroll]:',\n          '请设置 el-table 的高度，可以设置为 auto/100%！不然会一直加载！'\n        );\n      }\n\n      // fix: windows/chrome 的 scrollTop + clientHeight 与 scrollHeight 不一致的 BUG\n      scrollElem.setAttribute('infinite-scroll-distance', '1');\n\n      // 绑定 infinite-scroll\n      elInserted(scrollElem, binding, ...params);\n\n      // 将子集的引用放入 el 上，用于 unbind 中销毁事件\n      el[elScope] = scrollElem[elScope];\n    }, 0);\n  },\n  unbind: elUnbind\n};\n","// directive\nimport elTableInfiniteScroll from './directives/table-infinite-scroll';\n\n// Vue.use()\nelTableInfiniteScroll.install = (Vue) => {\n  Vue.directive('el-table-infinite-scroll', elTableInfiniteScroll);\n};\n\n// Vue.component()\nexport default elTableInfiniteScroll;\n"],"names":["elInserted","elInfiniteScroll","inserted","elUnbind","unbind","elScope","el","binding","params","scrollElem","querySelector","style","overflowY","setTimeout","height","console","warn","setAttribute","elTableInfiniteScroll","install","Vue","directive"],"mappings":";;;;;;;;AAKA,IAAMA,UAAU,GAAGC,gBAAgB,CAACC,QAApC;AACA,IAAMC,QAAQ,GAAGF,gBAAgB,CAACG,MAAlC;AACA,IAAMC,OAAO,GAAG,kBAAhB;AAEA,4BAAe;EACbH,QADa,oBACJI,EADI,EACAC,OADA,EACoB;sCAARC,MAAQ;MAARA,MAAQ;;;QAEzBC,UAAU,GAAGH,EAAE,CAACI,aAAH,CAAiB,yBAAjB,CAAnB;;QAGI,CAACD,UAAL,EAAiB;YACT,uDAAN;;;IAIFA,UAAU,CAACE,KAAX,CAAiBC,SAAjB,GAA6B,MAA7B;IAGAC,UAAU,CAAC,YAAM;UACX,CAACJ,UAAU,CAACE,KAAX,CAAiBG,MAAtB,EAA8B;QAC5BL,UAAU,CAACE,KAAX,CAAiBG,MAAjB,GAA0B,OAA1B;QACAC,OAAO,CAACC,IAAR,CACE,6BADF,EAEE,2CAFF;;;MAOFP,UAAU,CAACQ,YAAX,CAAwB,0BAAxB,EAAoD,GAApD;MAGAjB,UAAU,MAAV,UAAWS,UAAX,EAAuBF,OAAvB,SAAmCC,MAAnC;MAGAF,EAAE,CAACD,OAAD,CAAF,GAAcI,UAAU,CAACJ,OAAD,CAAxB;KAhBQ,EAiBP,CAjBO,CAAV;GAdW;EAiCbD,MAAM,EAAED;CAjCV;;ACLAe,qBAAqB,CAACC,OAAtB,GAAgC,UAACC,GAAD,EAAS;EACvCA,GAAG,CAACC,SAAJ,CAAc,0BAAd,EAA0CH,qBAA1C;CADF;;;;"}